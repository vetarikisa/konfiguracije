???ostaje jos da se odradi GET AC i da se predje onaj deo EMV-ja koji ja imam odstampan i ukoricen i na kraju definitivno proci kroz nas XML i shvatiti u kom trenutku i za sta se koristi koji podatak???i onda je EM prica potpuno zaokruzena!!!!!!!!!!!!!!!!!
- EMV transaction flow
	> najgrublje opisan tok
		< kartica salje SELECT FILE komande
		< kada se nadje aplikacija na kartici koju terminal podrzava salje se komanda GET PROCESSING OPTIONS
			~ kartica na GPO odgovara sa AFL-om (spiskom recorda iz odredjenih AEF-ova) i AIP-om (spisak svih algoritama koje kartica podrzava ili zahteva)
		< onda se na osnovu AFL-a koji se dobio od kartice sa READ RECORD traze podapci sa kartice
		< i na kraju GENERATE APPLICATION CRYPTOGRAM
			~ naravno ako serverska strana trazi moguce je da se salje drugi GENERATE APPLICATION CRYPTOGRAM
	> nesto preciznije objasnjen odnos razlicitih koraka iza ova tri je:
		1) selektuje se aplikacija
		2) terminal trazi podatke na osnovu kojih obavlja:
			- data authenticaiton
			- processing restriction
			- cardholder verification
			- terminal risk management
		3) na osnovu rezultata predhodnih koraka obavlja se terminal action analysis - na kraju se generise AC (Application Cryptogram)
		4) nakon prijema AC-a kartica obavlja card action analysis i odgovara terminalu
		5) sa dobijenim odgovorom terminal odgovara serveru
		6) transakcija se zavrsava ili se generise jos jedan AC (i ponavljaju se koraci 5 i 6, sa tim da se u koraku 6 sada zavrsava transakcija)
	> sada cu da pokusam da detaljnije objasnim pojedinacne korake iz predhodnih 6 koraka:
		< ovde cu samo da navedem pojedinacne pojmove (koji je deo kog koraka sa viseg logickog nivoa)
		< data authentication - ovaj deo zahteva najvise istrazivnja i posvecenosti???:
			~ offline Static Data Authentication (SDA)
			~ offline Dynamic Data Authentication (DDA)
			~ offline Combined Data Authentication (CDA) -??? da li je offline ili online???kapiram da je i ovo offline!!!!
		< processing restrictions
			~ Application Version Number
			~ Application Usage Control
			~ Application Effective/Expiration Dates Checking
		< cardholder verification
			~ offline PIN processing
			~ online PIN processing
			~ signature
			~ combined (nekih od gore navedena 3)
		< terminal risk management
			~ limit checking ??? sta je od ovih limita sta??? specificnosti za Visa/MC
				1) CVM limit check
				2) floor limit check
				3) contactless limit check
                -Postoje tri floor limit-a contactless-a:
                    * najnizi - da li ide offline ili online ()
                    * srednji - da li se koristi neki vid autentikacije korisnika (potpis ili online pin)(CVM contactless floor limit)
                    * najvisi - da li transakcija moze ili ne da se vrsi kao contactless (contactless transaction floor limit)
                    * napomena: obicno idu ovim redosledom po visini; svaki ima svoje ime... 
			~ random transaction selection
			~ velocity checking
		< kartica moze da primi i da odgovori sa jednim od sledecih AC (Application Cryptogram-a): - e sada kako su kreirane ove skracenice da ga jebem...???
				1) AAC (transaction declined)
				2) ARQC (online authorization request)
				3) TC (transaction approved).
	> detaljnije objasnjenje gore navedenih koraka
		< 
	> komande (kao i format pitanja i odgovora) koje se koriste kako bi se sprovele sve gore navedene operacije
		< tagovi i uopste informacije koje se koriste u komunikaciji tj EMV obradi (kako contact tako i contactless)
		< na 43oj strani 3. EMV knjige dat je skup svih mogucih komadi izmedju terminala i kartice. ali se u samoj transakciji najcesce koriste:
			~ GENERATE APPLICATION CRYPTOGRAM
			~ READ RECORD
			Nakon odgovora na GPO POS kernel na POS terminalu sadrzi spisak AEF-ova (tj njihove SFI-jeve) i spisak rekorda u okviru svakog AEF-a koji su porebno za dalji rad
			Sa READ RECORD komandom se te informacije citaju
			Request poruka READ RECORD-a napr:
			00 B2 02 0C 00
			Prva dva bajta su identicna
			Treci bajt je rekord
			Uprvih 5 bit sa leve strane 4 bajta se nalazi SFI (tj AEF) u kome se nalazi ovaj record (rekord).
			Znaci ova gornja komanda kaze "dohvati mi drugi rekord (record) iz AEF-a 2"!!!!!!!!!!!!!
			Ovako se pozivajusvi pojedinacni rekord dok se ne procita ceo AFL!
			Odgovor na READ RECORD komandu je u formatu:
			70 length podaci - podaci su niz TLV tagova
			70 - Application Elementary File (AEF) Data Template!!!!!!cini se kao logican templae!
			~ SELECT - knjiga 1 strana 129
			The SELECT command is used to select the ICC PSE, DDF, or ADF sorresponding to submitted file name or AID.
			Najcesci format je:
			00 A4 04 00 duzina_AID-a_ili_imen-a_file-a AID_ili_ime_file-a
			Pod imenom fajla se podrazumeva i onaj korenski direktorijum platnih aplikacija PAY...pa nesto...
			Odgovor na SELECT je FCI template 6F u okviru koga se nalazi FCI propietary template A5. FCI - File Control Information - dobija terminal kad selektuje aplikaciju preko AID-a!
			Pored A5 taga koji je obavezan dobija se jos jedan obavezan tag:
				84 - DF Name (u sustini to je AID na osnovu koga sam i referencirao samu aplikaciju)
				A5 - FCI Proprietary Template 
			E sada...sam sadrzaj A5 taga zavisi da li selektujem(o) PSE, DDF ili ADF. Kada saljem AID odgovara se sa scenariom za ADF ( ADF se referencira AID-om!!!!!!!!)
			Tagovi koji se dobijaju kao odgovor su (sve su opcioni):
				50 - Application label
				87 - Application Priority Indicator
				9F38 - PDOL - u ovom tag su smesteni podaci koje kartica zahteva ako se trazi da odgovori na GET PROCESSING OPTIONS!!!!!
				5F2D - language preference
				9F11  - Issuer Code Table Index
				9F12 - Application preffered Name
				BF0C (slozeni tag) - FCI Issuer Discretionary Data
			Svi ovo se odnosi na uspesnu komandu SELECT - 90 00 znaci file missing. Postoje i drugi odgovori ali necu sada ulaziti u njihovo objasnjavanje  (taziti SW1 SW2).
			~ GET PROCESSING OPTIONS (GPO)
			Nakon SELECT komande se sa terminala salje GPO komanda (koja se odnosi na selektovanu apilkaciju).
			Request poruka ima sledeci format:
			80 A8 00 00 02 83 00 - Prva 4 bajta su fiksna. Zatim ide duzina dodatnih podataka (u ovom slucaju 2 bajta) i onda PDOL (u ovom slucaju jedini dodatni podatak) koji je prazan. Cini mi da je ovo najcesci niz bajtova koji predstavlja GPO!
			Kao odgovor se dobija:
			80 duzina_narednih_podataka AIP+AFL - samo objasnjenje AIP-a i AFL-a je dato u odvojenim sekcijama
			80 - Response Message Template Format 1 - Contains the data objects (without tags and lengths) returned by the ICC in response to a command???zasto se na GPO odgovara sa ovim template-om????
			77 - Response Message Template Format 2 - cisto kao napomena
			~ VERIFY
			~ GET DATA (redje)
			Sa ovom komandom mogu da se uzmu samo sledeca 4 taga:
			• ATC (tag '9F36')
			• Last Online ATC Register (tag '9F13')
			• PIN Try Counter (tag '9F17')
			• Log Format (tag '9F4F')
			Format request komande je:
			80 CA tag 00
			Odgovor je samo TLV napr:
			9F 17 01 03
			~ VERIFY
			00 20 00
			~ GET CHALLENGE (redje)
- Visa:
	> contactless:
		< VCPS - Visa Contactless Payment Specification
		< DRL - Dynamic Reader Limits
		< TTQ - Terminal Transaction Qualifiers
		< qVSDC (quick Visa Smart Debit/Credit) and MSD (Magnetic Stripe Data) are contactless paths under a single Visa AID.
		< To minimize the interaction time between the card and the reader, qVSDC readers support Reader Preliminary Transaction Processing (Pre-processing). The Amount, Authorized (tag '9F02') is obtained and transaction-based risk management is performed before requesting that the card be presented and initiating card discovery.
		< qVSDC offers support for Offline Data Authentication (using fDDA) and is compliant with EMV in this processing, with the following exceptions:
				1) Generation of the dynamic signature is initiated by the GPO command. The INTERNAL AUTHENTICATE command is not used and no DDOL is used.
				2) The results of fDDA are not provided online to the issuer within the TVR or protected by the online authorization or clearing cryptograms.
		< To minimize the duration in which the card must remain within the reader RF field, the reader may obtain the transaction amount and perform some risk management checks prior to prompting for card presentment.
		< Discovery Processing is performed by the reader to poll for the presence of contactless cards that may have entered the reader’s RF field.
		< PPSE - Proximity Payment Systems Environment
		< Initiate Application Processing is where the card performs Card Action Analysis, (conditionally) generates the Application Cryptogram, (conditionally) generates the signature for Offline Data Authentication, and returns card application data.
		< During Processing Restrictions, the reader checks the application expiration date, application usage, and may check whether the card application is on the Terminal Exception File.
		< 
- MasterCard:
	> contactless:
		< PPSE - PayPass Payment Systems Environment!!!!!!!!!!!!bice da je Visa napravila analognu pricu!!!!!!!!!!tj PPSE nije identican akronim na obe platforme ali kapiram da predstavlja isti pojam.
		< Within the MasterCard PayPass transactions we distinguish two different profiles: M/Chip and Mag Stripe.
		< The PayPass – Mag Stripe profile was developed to allow contactless payments using
				authorization networks that presently support magnetic-stripe authorization for credit
				or debit applications. A PayPass – Mag Stripe card stores track 1 and track 2 data
				with a discretionary data field that contains a dynamic CVC (Card Verification Code).
				The dynamic CVC is generated by the PayPass – Mag Stripe card using a secret key,
				the Application Transaction Counter of the PayPass – Mag Stripe card and an
				unpredictable number generated by the terminal. The PayPass – Mag Stripe card
				with dynamic CVC provides better security than magnetic-stripe technology because
				the dynamic CVC is used as authentication code by the issuer to authenticate the
				PayPass – Mag Stripe card during the online authorization processing.
		< The PayPass – M/Chip profile was developed to allow contactless payments in a
				market that is oriented towards offline acceptance. To manage the offline risk the
				terminal must be capable of performing terminal risk management and offline
				authentication of the card (e.g. static data authentication). The PayPass – M/Chip
				card must be capable of performing its own card risk management and of accepting or
				declining the transaction offline.
		< The PayPass card and terminal do not support offline PIN verification. This means the card does not support offline plaintext PIN nor offline enciphered PIN verification.
		< Ukratko opis transakcije (manje vise ono sto sam vec napisao u vezi kontakt transakcije):
		1. The terminal begins by selecting the PayPass Payment Systems Environment
(PPSE) using the SELECT command.
		2. The card responds with the File Control Information (FCI) including all the AIDs
supported by the card with their priority indicator.
		3. The terminal selects the AID with the highest priority that is supported by both
card and terminal and issues the SELECT command with this AID.
		4. The card responds with the File Control Information (FCI). The FCI may
contain the Processing Options Data Object List (PDOL). The PDOL is a list of
tags and lengths of terminal resident data elements needed by the card in the GET
PROCESSING OPTIONS command.
		5. The terminal issues the GET PROCESSING OPTIONS command. If there is no
PDOL in the card, then the terminal uses the command data field ‘8300’.
Otherwise the command data field contains a data object with tag ‘83’ and a value
field comprising the concatenated list of data elements resulting from processing
the PDOL.
		6. The card returns the Application Interchange Profile (AIP) and the Application
File Locator (AFL).
		7. – 8. The terminal issues the READ RECORD command to retrieve the generic card
application data elements (e.g. PAN, Application Expiry Date, etc…) located in
the first record of the file with SFI 2. The response message of the card contains
the record read including all the generic card application data elements.
		9. – 10. If the card supports offline data authentication (static data authentication or
combined DDA/AC generation), then the terminal issues the READ RECORD
command to retrieve the card data elements necessary to recover the Issuer Public
Key. These data elements are located in the first record of the file with SFI 3.
		11. – 12. If the card supports static data authentication and the card does not support
combined DDA/AC generation, then the terminal issues the READ RECORD
command to retrieve the Signed Static Application Data. This data element is
located in the second record of the file with SFI 3.
		13. – 14 – 15. – 16. If the card supports combined DDA/AC generation, then the
terminal issues two READ RECORD commands to retrieve the card data elements
necessary to recover the ICC Public Key. These data elements are located in the
first and second record of the file with SFI 4.
		17. After terminal risk management (application expiry date checking, terminal floor
limit checking, exception file checking, etc.) has been completed, the terminal
makes a preliminary decision to decline the transaction offline, complete it online
or accept it offline. This decision is based upon the Terminal Verification Results
(TVR), the issuer action preferences and acquirer action preferences according to
the method described in [EMV BOOK 3]. If the decision is to accept the
transaction offline, then the terminal issues the GENERATE AC command
requesting a TC. If the decision is to decline the transaction offline, then the
terminal issues the GENERATE AC command requesting an AAC. In the case the
terminal wants to complete the transaction online, then the terminal issues the
GENERATE AC command requesting an ARQC.
		18. Based upon the CDOL1 related data included in the data field of the GENERATE
AC command, the card may perform its own card risk management. As a result
of the card risk management process, the card may decide to complete a transaction
online, accept offline or decline the transaction. In all three cases the card
will generate an Application Cryptogram. If the card responds with a TC or an
AAC, then the terminal completes the transaction offline. If the card responds
with an ARQC, then the terminal attempts to go online, sending an authorization
request message to the issuer. Included in the authorization request message is
the ARQC for online card authentication
			< The terminal determines which applications in the ICC are supported by comparing the AIDs for applications in the terminal with AIDs for applications within the card.
			< To minimize processing in the card, the data field of the command messages is not
				TLV encoded. The application in the card indicates the requested data, including
				format and length, by sending a Data Object List (DOL) to the terminal. DOLs used
				in this specification include the PDOL used with the GET PROCESSING OPTIONS
				command, the CDOL1 and CDOL2 used with the GENERATE AC command, the
				TDOL used to generate the TC Hash Value and the UDOL used with the COMPUTE
				CRYPTOGRAPHIC CHECKSUM command.
- Objasnjavanje termina koje se koriste u gore navedenim objasnjenjima:
	< AID
		> The structure of the AID is according to ISO/IEC 7816-5 and consists of two parts:
			1. A Registered Application Provider Identifier (RID) of 5 bytes, unique to an application provider and assigned according to ISO/IEC 7816-5.
			2. An optional field assigned by the application provider of up to 11 bytes. This field is known as a Proprietary Application Identifier Extension (PIX) and may contain any 0–11 byte value specified by the provider. The meaning of this field is defined only for the specific RID and need not be unique across different RIDs.
		> ovde je bila data lista svih AID-ova: https://www.eftlab.com.au/index.php/site-map/knowledge-base/211-emv-aid-rid-pix
		> u sustini ono sto je mozda potrebno zapamtiti je da je RID MC-a (MasterCard) A000000004 a Visa-in A000000003
	< Certification Authority Public Key Index - CAPK
		> tag 8F
	< TAC (TIC)
	< PAN
		> zanimljiv link - http://stackoverflow.com/questions/72768/how-do-you-detect-credit-card-type-based-on-number
		> Generalno pravilo za kreiranje PAN-a:
		1) The credit/debit card number is referred to as a PAN, or Primary Account Number. The first six digits of the PAN are taken from the IIN, or Issuer Identification Number, belonging to the issuing bank (IINs were previously known as BIN — Bank Identification Numbers — so you may see references to that terminology in some documents). These six digits are subject to an international standard, ISO/IEC 7812, and can be used to determine the type of card from the number. Cesce se koristi termin BIN.
		2) prva cifra se odredjuje prema sledecem obrascu:
			0	ISO/TC 68 and other industry assignments
			1	Airlines
			2	Airlines, financial and other future industry assignments
			3	Travel and entertainment
			4	Banking and financial
			5	Banking and financial
			6	Merchandising and banking/financial
			7	Petroleum and other future industry assignments
			8	Healthcare, telecommunications and other future industry assignments
			9	For assignment by national standards bodies
		NAPOMENA:
			~ Visa 4xxxxx
			~ MC 51xxxx - 55xxxx
			~ Discover 6011x, 644xxx, 65xxxx
			~ Amex 34xxxx, 37xxxx
		3) ostale cifre (bez poslednje koja najcesce prestavlja checksum preko Lun-ove formule) predstavljaju jedinstven broj racuna vlasnika PAN-a (kartice) - personal account number
	< Limit???detaljnije objasnjenje!!!!!!!!!!
		1) If the Amount, Authorized is greater than or equal to the Reader ####Contactless Transaction Limit####, then the reader shall set the Contactless Application Not Allowed indicator for Visa AIDs to 1.
Note: It is strongly recommended that the Reader Contactless Transaction Limit Check be disabled.
		2) If the Amount, Authorized is greater than or equal to the Reader ###CVM Required Limit###, then the reader shall indicate CVM Required (set TTQ byte 2 bit 7 to 1b).
		3) If the Amount, Authorized is greater than either the Reader ###Contactless Floor Limit### or (if the Reader Contactless Floor Limit is not present) the applicable Terminal Floor Limit (tag '9F1B'), then the reader shall indicate Online Cryptogram Required (set TTQ byte 2 bit 8 to 1b).
	< DOL (Data Object List) - strana 38 knjige 3
		> unapred dogovoren standard koji menja TVL formata kako bi se ubrzala razmena podataka. I ti formati se koriste kada kartica treba da trazi neke podatke pa da ne gubi vreme prilikom formiranja komplikovanijih struktura podataka.
		> A DOL is a concatenated list of entries, with each entry representing a single data element to be included in the constructed field.The format of each entry is a one- or two-byte tag identifying the desired data object, followed by a one-byte length which represents the number of bytes the field shall occupy in the command data.
		E sada za u svakoj od pojedinih komandi se javlja neka DOL:
			~ DDOL - INTERNAL AUTHENTICATE
			~ CDOL - GENERATE APPLICATION CRYPTOGRAM (postoje 1 i 2)
			~ TDOL - used to generate TC hash value
			~ PDOL - GET PROCESSING OPTIONS
	< PSE, DDF, ADF, AEF, AFL, record:
		> fajl sistem kartice je izgrajden od ADF (Application Definition Files) blokova. Broj ADF-ova predstavlja broj aplikacija na kartici. Referencira se AID-om (SELECT komandom) i tada terminal vraca FCI.
		> ADF sadrzi AFL (Application File Locator) - lista svih AEF-ova koje ADF sadrzi kao i AEF-ove.
			ADF = AFL + AEFs (max 30)
		> AEF (Application Elementary File) sadrzi podatke aplikacije - AEF predstavlja podblok ADF (ako je ADF poddirektorijum DDF/PSE-a onda je AEF file)
		> a u okviru AEF-a kome se pristupa pomocu SFI (Short File Identifier-a) se nalaze recordi (???nisam siguran koliko moze da ih ima)
		> e sada PSE je vrsta DDF-a - 1PAY.SYS.DDF01 (sa ovim imenom moze da mu se pristupi) - jednostavno se DDF-u (Directory Definition File) i PSE-u pristupa kao i ADF-u - preko jedinstvenog AID-a. Ali odgovor na SELECT komandu je drugaciji ako se selektuje PSE ili DDF ili ADF (knjiga 1 strana 129)
		> inace PSE predstavlja sistem za grupisanje platnih aplikacija (tj ako se na kartici nalaze i neke ne platne aplikacije onda termianl moze znati da su platne u ovom folder-u).
		>MNOGO BITNO:ZNACI SA SELEKT SE MOGU SELEKTOVATI I PSE I DDF I ADF SA ODGOVARAJUCIM AID-JEM (ILI IMENOM U SLUCAJU PSE-A) A ODGOVOR NA SVAKU OD TIH SELECT KOMANDI JE SPECIFICAN I DAT NA STRANI 129 1. EMV KNJIGE!!!!!!!!!!!!
		> a sami rekordi se sastoje od podataka u TLV (Tag Length Value) formatu!!!!!!!!!
		> referenca za ADF je AID a za AEF je SFI!!!!!!!!a u okviru AEF-a postoje rekordi (recordi)!!!!!!!!!!!!!
		> AFL se dobija u odgovoru na GPO i to iza AIP (Application Interchange Profile) a sam format AFL je niz pojedinih sekcija AEF-a i to napr:
		08 02 02 00
		0000 1000 0000 0010 0000 00010 0000 0000
		Citanje pocinje sa leva:
		prvih 5 bita predstavlja SFI tj referenca na odredjeni AEF
		drugi bajt (sa leva) predstavlja prvi rekord iz ovog AEF-a koji se uzima
		treci bajt (sa leva) predstavlja poslednji rekord koji se uzima
		i poslednju (cetvrti bajt sa leva) govori koliko se rekorda koristi u offline data authentication-ji pocev od prvog rekorda koji se ovde cita
	< AIP - Application Interchange Profile
		> sadrzi 2 bajt od kojih je desni rezervisan za kasniju upotrebu (RFU - reserved for future use)
		>ako su biti oznaceno od b8 ka b1 od krajnje levog ka krajne desnom onda biti u prvom (bajtu sa leva) u AIP-u nose sledece inforamcije:
		b8 - RFU
		b7 - SDA supported
		b6 - DDA supported
		b5 - Cardholder verification is supported
		b4 - Terminal risk management is to be performed
		b3 - Issuer authentication is supported  (ako je ovaj bit setovan onda se Issuer Authentication odradjuje preko EXTERNAL AUTHENTICATION)
		b2 - RFU
		b1 - CDA supported
	< data authentication:
		> pre ulaska u autentikaciju pored same definicije autentikacije dacu i nekoliko potrebnih definicija vezanih za kriptografiju:
		~ tacna je ova donja prica - u annex-u A2 knjige 2 je data potvrad ovog algoritma!!!!!!!!!!!!!!!!!
		~ In cryptography, a public key certificate (also known as a digital certificate or identity certificate) is an electronic document used to prove ownership of a public key. The certificate includes information about the key, information about its owner's identity, and the digital signature of an entity that has verified the certificate's contents are correct. If the signature is valid, and the person examining the certificate trusts the signer, then they know they can use that key to communicate with its owner.
		~ Certification Authority (CA) je jednostavno institucija kojoj i Issuer i Acquier-er veruju! Na POS (acquier-ersku stranu) smestaju CA Public key a na Issuer-skoj strani (na kartici) smestaju Private i Public kljuc (koji su dodeljeni konkretoj aplikaciji Issuer-a). E sada zasta sluzi ovaj CA Public Key na POS-u? Potreban je da bi se verovalo onom public-private paru na kartici! Private kljucem se na kartici potpisuje neki podatak. Da bi se taj poptis verifikovao tj da bi POS mogao da se uveri da je tacan potreban je odgovarajuci public kljuc koji je takodje na kartici. Da bi se verovalo public kljucu koji je na kartici on je potpisan private kljucem koji je par sa public kljucem koji je na POS terminalu!!!!!!!!!!!!Ukratko, na osnovu public kljuca (koji je generisao CA) POS veruje public kljucu koji prima sa POS-a a onda na osnovu toga public kljuca (koji je dobio sa kartice) verifikuje i proverava (autenticnost) odredjenog podatka koji je Issuer potpisao private kljucem (koji je par onog public kljuca kome POS veruje na osnovu public kljuca kome veruje). Zakljucak je da i Issuer i Acquier-er moraju da veruju istom CA-au!!!!!!!!!!!!!!!!!!!!!smatracemo ovo elemntarnim algoritmom!
		~ CA generise sertifikat za neki kljuc tako sto ga potpise svojim private kljucem i onda svako ko verujem odgovarajucem public kljucu CA-a veruje sertifikatu (kljucu) koji je CA potpisao. Naravno, sertifikat je jednostavno kljuc plus jos podaci koji idu uz kljuc (datum do kada vazi, za koji algoritam se koristi, kolika je duzina kljuca).
		~ E sada sta znaci ovo verujem i kako se dolazi do toga... Trenutno ne mogu da ulazim u dublju analizu ali cini mi se da algoritam funkcinise na sledeci nacin - od podataka koje treba da se potpisu se izracuna hash a onda se tako dobijeni hash potpise private kljucem CA-a. Svako ko veruje CA-au tj njegovom kljucu moze daizracuna isti hash i da dekriptuje dobijeni hash i da uporedi tako dobijene vrednosti. Ako su jednake onda je primljeni podatak (dokument, kljuc ili sta vec ) netaknut. Hash je jedinstven skup podataka (niz bajtova) koji se dobija iz odredjenog dokumenta (niza bajtova) a njegova karakteristika je da se za svaki dokument dobija jedinstven hash. Pored toga druga bitna karakteristia je da je nemoguce odraditi inverzni proces - da se iz hash-a izvuce dokument (niz bajtova) za koji je hash izracunat!
		~ Jos jedna napomena!!!!!!!!!!da li se kriptuje public ili private kljucem???odnosno da li na osnovu toga da znam da li je kljuc public ili private mogu da kazem da li se tim kljucme kriptuje ili dekriptuje???zasto???kada se kriptuje neki podatak server drzi na sajtu public kljuc, ja kriptujem podatak i posaljem server u a server dekriptuje private kljucem. a kada se radi o digitalnom potpisu server deli public kljuc a kriptuje private kljucem. kada dobijem dokument racunam hash i onda dekriptujem potpis (hash kriptovan private kljucem) i uporedjum moj hash sa dekriptovanim i na osnovu toga utvrdjujem da li je dokument valiadan.ukratko podatak je moguce kriptovati private kljucem i dekriptovati public i kriptovati public i dekritpovati private kljcuem!jednostavno se kljuc za koji svako zna koristi ime publi a za tajni private!
		~ PITANJE?????????????KADA SE GENERISE PAR PUBLIC/PRIVATE LKJUCEVA, DA LI SE ZNA KOJIM KLJUCEM SE KRIPTUJE KOJIM SE DEKRIPTUJE ILI BILO KOJI KLJUC MOZE DA KRIPTUJE A DRUGI DA DEKRITPUJE????(KOD SIMETRICNOG KRIPTOVANJA JE TAKO)
		> authenticaiton - provision of assurance of the claimed identity of entity or of data origin.
		> Offline data authentication is required to support offline transactions but is optional in cards that support only online transactions.
		> VELIKA NAPOMENA!!!!!!!!!!!!!!!!!!OVO JE SAMO AUTENTIKACIJA TJ GARANCIJA DA JE ONO STO SAM POSLAO (STO JE KARTICA POSLALA) KA POS TERMINALU NEIZMENJENO!!!!!!!!!!!!!!ALI SVAKO MOZE DA PRISLUSKUJE KOMUNIKACIJU!!!!!!!!!!!!!!!!I DA VIDI STA KARTICA I TERMINAL RAZMENJUJU ALI NE MOZE DA IZMENI!!!!!!!!!!!
		> treba imati u vidu da je kod SDA moguce poturiti podatke koje kartica salje jer su uvek isti!!!!!!!!!!!
		> SDA
			This detects unauthorised alteration of data after personalisation. The only form of offline static data authentication defined is Static Data Authentication (SDA) that verifies the data identified by the Application File Locator (AFL) and by the optional Static Data Authentication Tag List.
			SDA requires the existence of a certification authority, which is a highly secure cryptographic facility that ‘signs’ the issuer’s public keys.
			Kod SDA se koristi elementarni algoritam sa tim da se (staticki) odredjeni skup podataka kriptuje private kljucem sa kartice - a onda se na POS-u taj skup dekriptuje odgovarajucim public kljucem koji je prevucen sa kartice i proverava se da li su podaci tacni. 
			ICCs that support SDA shall contain the data elements:
				~ Certification Authority Public Key Index - Contains a binary number that indicates which of the application’s certification authority public keys and its associated algorithm that reside in the terminal is to be used with this ICC.
				~ Issuer Public Key Certificate - Provided by the appropriate certification authority to the card issuer. When the terminal verifies this data element, it authenticates the Issuer Public Key plus additional data as described in section 5.3.
				~ Issuer Public Key Certificate - Provided by the appropriate certification authority to the card issuer. When the terminal verifies this data element, it authenticates the Issuer Public Key plus additional data as described in section 5.3.
				~ Signed Static Application Data - Generated by the issuer using the private key that corresponds to the public key authenticated in the Issuer Public Key Certificate. It is a digital signature covering critical ICC-resident static data elements, as described in section 5.4.
				~ Issuer Public Key Remainder - The presence of this data element in the ICC is conditional. See section 5.1 for further explanation.
				~ Issuer Public Key Exponent - Provided by the issuer. See section 5.1 for further explanation.
			Postoji i spisak elemenata koji ulaze u static data za potpis. Ne mogu i te podatke gurati ovde!
		> DDA
			Kod DDA se pored static application data potpisuje i public kljuc koji je jedinstven za karticu. Onda se i pojedinacni podaci mogu potpisivati sa private kljucem jedinstvenim za karticu.???valjda je ovako???
			Ako se koristi DDA mora postojati komanda INTERNAL AUTHENTICATION koja salje podatke koji takodje ulaze u autentikaciju!
			Ukratko CDA je identican postupak kao DDA sa tom razlikom da u podatke koji se proveravaju ulazi i cryptogram pod uslovom da nije AAC (odbjianje transakcije). Pored toga CDA mora da se vrsu u trenutku da kada se sa terminala posalje GENERATE AC!
			Two forms of offline dynamic data authentication exist:
				• Dynamic Data Authentication (DDA) executed before card action analysis,
				where the ICC generates a digital signature on ICC-resident/generated data
				identified by the ICC Dynamic Data and data received from the terminal
				identified by the Dynamic Data Authentication Data Object List (DDOL).
				• Combined Dynamic Data Authentication/Application Cryptogram Generation
				(CDA) executed at issuance of the first and second GENERATE AC
				commands. In the case of a Transaction Certificate (TC) or Authorisation
				Request Cryptogram (ARQC), the ICC generates a digital signature on
				ICC-resident/generated data identified by the ICC Dynamic Data, which
				contains the TC or ARQC, and an Unpredictable Number generated by the
				terminal and identified by Card Risk Management Data Object List 1
				(CDOL1) or Card Risk Management Data Object List 2 (CDOL2).
					CDA consists of a dynamic signature generated by the ICC (similar to DDA but
					including Application Cryptogram (AC) generation) followed by verification of
					the signature by the terminal.
					In this section it is assumed that:
					• Both the ICC and the terminal support CDA.
					• The cryptogram to be requested is not an Application Authentication
					Cryptogram (AAC).
- sredjivanje svega sto je sasa pavlovic objasnjavao:
- kriptografija:
        > In cryptography, a PKI is an arrangement that binds public keys with respective user identities by means of a certificate authority (CA).  A CA issues digital certificates that contain a public key and the identity of the owner. The matching private key is not made available publicly, but kept secret by the end user who generated the key pair. The certificate is also a confirmation or validation by the CA that the public key contained in the certificate belongs to the person, organization, server or other entity noted in the certificate. A CA's obligation in such schemes is to verify an applicant's credentials, so that users and relying parties can trust the information in the CA's certificates. CAs use a variety of standards and tests to do so. In essence, the certificate authority is responsible for saying "yes, this person is who they say they are, and we, the CA, certify that".If the user trusts the CA and can verify the CA's signature, then (s)he can also assume that a certain public key does indeed belong to whoever is identified in the certificate.
        > Public key cryptography is a cryptographic technique that enables entities to securely communicate on an insecure public network, and reliably verify the identity of an entity via digital signatures.  A public key infrastructure (PKI) is a system for the creation, storage, and distribution of digital certificates which are used to verify that a particular public key belongs to a certain entity. The PKI creates digital certificates which map public keys to entities, securely stores these certificates in a central repository and revokes them if needed.  
        A PKI consists of (pored CA ne znam ko su i sta rade ostale institucije ali neka za sada ceo sistem opisan ovde):
        A certificate authority (CA) that stores, issues and signs the digital certificates
        A registration authority which verifies the identity of entities requesting their digital certificates to be stored at the CA
        A central directory—i.e., a secure location in which to store and index keys
        A certificate management system[clarification needed]
        A certificate policy
        > There are two main uses for public-key cryptography:
            Public-key encryption, in which a message is encrypted with a recipient's public key. The message cannot be decrypted by anyone who does not possess the matching private key, who is thus presumed to be the owner of that key and the person associated with the public key. This is used in an attempt to ensure confidentiality.
            Digital signatures, in which a message is signed with the sender's private key and can be verified by anyone who has access to the sender's public key. This verification proves that the sender had access to the private key, and therefore is likely to be the person associated with the public key. This also ensures that the message has not been tampered with, as any manipulation of the message will result in changes to the encoded message digest, which otherwise remains unchanged between the sender and receiver.
            An analogy to public-key encryption is that of a locked mail box with a mail slot. The mail slot is exposed and accessible to the public – its location (the street address) is, in essence, the public key. Anyone knowing the street address can go to the door and drop a written message through the slot. However, only the person who possesses the key can open the mailbox and read the message.
            An analogy for digital signatures is the sealing of an envelope with a personal wax seal. The message can be opened by anyone, but the presence of the unique seal authenticates the sender.
            A central problem with the use of public-key cryptography is confidence/proof that a particular public key is authentic, in that it is correct and belongs to the person or entity claimed, and has not been tampered with or replaced by a malicious third party. The usual approach to this problem is to use a public-key infrastructure (PKI), in which one or more third parties – known as certificate authorities – certify ownership of key pairs. PGP, in addition to being a certificate authority structure, has used a scheme generally called the "web of trust", which decentralizes such authentication of public keys by a central mechanism, and substitutes individual endorsements of the link between user and public key. To date, no fully satisfactory solution to the "public key authentication problem" has been found.
            Ukratko objasnjenje drugog algoritma web of trust (takodje bi moglo detaljnije da se objasnig):
            The simplest way to explain it is a bit like "6 degrees of separation". The idea with a web of trust is that you verify someone's identity and decide to trust them to trust people for you. So if I verify that Bob's certificate is actually for Bob and I verify that Charlie's certificate is from Charlie, Bob and Charlie can both verify that Dan is in fact Dan. Now, when Dan want's to talk to me, he can provide his certificate which is trusted by both Bob and Charlie. Since I trust Bob and Charlie, I figure that it is probably a good chance Dan is actually Dan. This works since I expect that Bob and Charlie weren't both working together and Dan had to have convinced them both that he was ok. A web of trust is such a network of people who have verified each other's certificates and thus you can trust unknown certificates based on how many people you have verified that have established a relationship with them.
        > zahtevi koji se postavljaju pred kriptografije:
                In addition to providing confidentiality, cryptography is often asked to do other jobs:
                — Authentication. It should be possible for the receiver of a message to ascertain its origin;
                an intruder should not be able to masquerade as someone else.
                — Integrity. It should be possible for the receiver of a message to verify that it has not been
                modified in transit; an intruder should not be able to substitute a false message for a legitimate
                one.
                — Nonrepudiation. A sender should not be able to falsely deny later that he sent a message.
                - naravno ovde se kao glavno pitanje namece razlika izmedju authenticaiton i nonrepudiation???odrradicu i to kasnije ali evo ukratko objasnjenja:
                        > Authentication and non-repudiation are two different sorts of concepts. Authentication is a technical concept: e.g., it can be solved through cryptography. Non-repudiation is a legal concept: e.g., it can only be solved through legal and social processes (possibly aided by technology). Some people have been taught that non-repudiation can be provided through crypto-mathematics alone. However, that is not correct.
- Tumacenje 3D-Secure-a:
	* e-commerc -> kupovina preko interneta tj kupovina kada merchat i njegova kartica nisu na istoj fizickoj lokaciji kao POS merchat-a - card not-present transaction
	* dodatni entiteti u e-commercu (3D-Secure): Payment Gateway, Directory Server(Service) i ACS (Access Control Server)
	* Payment Gateway - na njega se prosledjuje korisnik kada zeli da unese podatke svoje kartice (pre toga se sa sajta merchant-a posalje ID kupovine sa koji se, mozda implicitno, prijavljuje cardholder na sajt Payment Gateawy-a) - firma koja pruza uslugu acquireer-u (ono sto mi radimo za Italijane)
	* Odatle se salje zahtev preko (Visa-inog Directory Server-a, koji izgleda switch-uje ove zahteve) ka ACS koji se nalazi u banci (issuer-u) da li je taj korisnik uopste prijavljen ka 3D Secure sistem - Visa/MasterCard server koji kaze u kojoj se banci taj cardholder nalazi. pre toga se salje VEReq i VERes da se vidi da li uopste postoji taj koristnik u basi ACS-a gde mora cardholder licno sa karticom da ode da odradi eenrollment
	* ranijim odlaskom u banku se korisnik smesta u ACS (i dodeljuje mu se password za koriscenje 3D Secure-a)
	* posto se utvrdi da taj korisnik postoji u bazi podataka (na sajtu PG-a) mu se trazi password koji se prosledjuje ACS-u na autentikaciju 
	* kada se korisnik autentikuje sama transakcija se (preko acquire-ovog procesora) salje issuer-u na klasicnu autorizaciju cime se transakcija zavrsava (uspesno ili ne)
	* sva ova zavrzlama sluzi zbog sigurnijeg obavaljanja card not-present transakcija. Issuer preuzima celu odgovornost za transakciju tj issuer snosi odgovornost pri zloupotrebi (za razliku od obicnog scenarija, bez 3D Secure-a, kada zloupotrebu placa merchant)
	* A gateway refers to the software that transports the credit card information from your customers (either collected on your website or a virtual terminal) to your credit card processor.
    If you sell online, you will definitely need a gateway, as well as a credit card processor. The gateway is what sits between your shopping cart software and your credit card processor. 
    * ako hocu davidim i sliku celog objasnjenja samo kucati na netu 3D secure i traziti slike, uz svaku sliku ide i objasnjenje.
    * a ranije se samo cardholder autentikovao Visa-inim CVV-om ili MasterCard-ovim CVC-om! sada se korisnik prvo mora autentikovati svojoj banci pa tek onda moze da se ide regularnim kanalima i da se autorizuje transakcija.
    * In a nutshell, 3-D Secure is card authentication anti-fraud protocol developed by Visa and MasterCard to verify a shopper's identity during online shopping. Based on this new standard, Visa and MasterCard have rolled out their authentication programmes Verified by Visa (VbV) and MasterCard SecureCode (MCSC).As the name suggests the protocol interacts between Three Domains (3-D) providing secure communication between all participating parties: issuer domain, interoperability domain, acquirer domain.In response to challenges of online fraud, Visa and MasterCard each introduced their own 3-D-based security programme. Apart from some smaller differences in terminology and the succession of popup or inline windows for enrollment and authentication, Visa  and MasterCard offer the same online security. As both programmes operate in the same way, the Wirecard 3-D Secure (payment gateway) solution supports MasterCard SecureCode (including Maestro card) and Verified by Visa interchangeably.e-commerce transactions are 15-20 times more likely to be disputed and charged back than transactions undertaken face to face.  Compared to VbV, MCSC uses different transaction status flags and ECI values (electronic commerce indicator) in the payment authentication request and response messages (PARes and PAReq) and has different chargeback reason codes.VbV and MCSC take over where common authentication by Card Verification Value (CVV) or MasterCard's Card Verification Code (CVC) leave off. Only after the shopper is authenticated, the card issuer authorizes the online purchase, which means that the issuer confirms that the referenced bank account exists and that the cardholder has sufficient funds in the account to cover the purchase.When a shopper makes a transaction, the Wirecard gateway contacts the global directory in the interoperability domain to determine the web link (URL) to the bank which issued the card used to makethe purchase.Please note that the process of enrollment takes place between the cardholder and the card issuing bank and neither involves merchant nor payment card association (Visa or MasterCard) directly. During enrollment In the case of a Visa smart card, the verification process also establishesthat the cardholder has physical possession of the card at the time of enrollment???. Before the 3-D Secure software tries to authenticate a cardholder, it checks if thecardholder is enrolled. This process is known as Enrollment Check and is based on a sequence of interconnected verification requests and responses, called Verify Enrollment Request (VEReq) and Verify Enrollment Response (VERes).For the merchant the attempted authentication means that he is protected against certain chargebacks. According to Visa and MasterCard sources, online retailers participating in 3-D Secure authentication can reduce financial losses through online fraud by 60% - 70%. According to MasterCard, approximately 70% of all chargebacks are result from the cardholder denying responsibility for the transaction and the acquirer lacking the evidence of the cardholder's authentication.
- A chargeback (also known as a reversal) is a form of customer protection provided by the issuing banks, which allows cardholders to file a complaint regarding fraudulent transactions on their statement. Once the cardholder files a dispute, the issuing bank makes an investigation into the complaint. Once the transaction is proven to be indeed fraudulent, the bank will refund the original value to the cardholder. From the merchant's point of view, if you do not prove the transaction to be legitimate, the bank will take back the entire value of the transaction from your account, along with an additional fee. This chargeback fee will range from $0 to $100, depending on the merchant bank sponsoring your account. Fraudulent transactions - the most common cause for chargeback is fraudulent transactions. This happens when the credit card is used without the authorization and consent of the cardholder. In cases like these, the merchant is held solely responsible.With an Internet or Mail Order charge all a customer needs to say is: 'I do not remember ordering anything from this merchant'. This is a dispute that is filed when the customer receives their bill and sees the ('unknown'-) charge on the statement. This is called a "Retrieval Request". In the case of Visa, merchants are required to keep sales drafts for a minimum of 3 years.  For MasterCard, they generally require storage for only 180 days. These requests usually accompany information such as the cardholder's account number, the date of the transaction, the reference number and the sale amount. Retrieval requests are very crucial. When it is requested, you are expected to reply to it with the required documents within the specified time given.  Most chargebacks is not fraud, identity theft, processing errors or the like. What causes most chargebacks is what is referred to as "friendly fraud."From a merchant's point of view, there is nothing friendly or pleasing about friendly fraud. Friendly fraud is an industry term which refers to a fraud which results from a customer making a purchase with his or her own credit card, receiving the merchandise and then filing for a chargeback. This involves dishonest people who would like to keep the merchandise without actually paying for it. Truth be told, friendly fraud is one of the most difficult type of chargebacks to process.
- Visa/MasterCard
- visa u evropi koristi SMS sistem a MasterCard u americi koristi sms sistem	
	* kada kazem sms mislim na Single Message System i on se odvija na sledeci nacin
		> kad se obavi autorizacija (POS/ATM -> procesor acquier-a -> Visa/MasterCard -> procesor issuer-a -> moze i ne mora da ide do banke zavisi gde se vrsi autorizacija)
		> odgovor autorizacije ide nazad i kada dodje do Visa-e/MasterCard-s pored vracanja POS/ATM-u salje se clearing direktno u nacinalnu banku gde su Visa/MasterCard otvorile racune za svakog issuer-a i acquer-a
		> sam settlement se obavlja kada je settlement zakazan i za dual messageing system-e
		> i tada se obavlja net settlement (tj bruto settlement - u apsolutnom smislu koliko svaka banka treba da uplati ili primi)
	* Visa/MasterCard posmatraju samo banke njih ne zanima sam korisnik banke
	* sta je jos bitno...banki se pristupa preko procesora nije bitno da li se radi autorizacija ili acquaring
	* settlement Vise i MasterCard-a je u dolaru pa se u odnosu na billing valutu prenosi u odgovarajucu valutu - cini mi se da se ovo radi kada se razlikuju billing i valuta issuer-a?
- Ceo proces obrade transakciej i rad Visa-e i MasterCard-a:
	* sam outgoing file (salje ga procesor na ime banke - valjda je to kada se kod DMS-a u clearing-u salju transakcije za taj dan) i incoming file (prima ga banka preko procesora od Visa-e/MasterCard-a - u daljem tekstu VMC;to je valjda stabanka kome terba da isplati) je mnogo pregledniji kod Visa-e i intuitivniji i ostavljeno je dosta prostora za doradu - postoji 9 nivoa koje slog moze da ima - za svaku transakciju je nominalno dodeljen jedan slog
	* inace u okviru samog outgoing file-a mogu pored transakcija prodaje da budu i ostale transakcije - chargeback, prodaja na rate ili sta vec
	* velika napomena: da li je kreditna ili debitna kartica to Visa-u i MC ne zanima one naplacuju ceo iznos - a samo klempanje (kreditiranje) obavalja banka
	* Amex i Diners su zatvoreni sistem a banke su samo njihovi agenti. 
	* kad a banka zeli da pristupi VMC mrezi prvo moze da dobije Issuing profil - kartice i ATM-ovi
	* banka dobija BIN (Bank Identification Number) za kartice i za ATM - nju ne zanim nista na nizem nivou - jedinstvena identifikacija ATM-a ili same kartice - potrebni su joj ovi jedinstveni identifikatori zbog rutiranja samih transakcija
	* tek kada banka pocne da izdaje kartice potrebno je da se obezbedi odredjen uslov kako bi banka mogla da ima svoju POS mrezu i da radi eCommerc tj da otvori i Acquiring profil
	* sama cifra varira ali radi se o udelu kartica banke na odredjenoj teritoriji napr Intesa mora da ima 15% Visa-inih kartica u Srbiji kako bi Visa htela da joj dozvoli Acquire-ing profil
	* kada se transakcije obavaljaju ON_US (karticom banke se placa na terminalu same banke) ta transakcija ne interesuje VMC
	* ali kada se radi OFF_US situacija je drugacija
	* Visa je jaca u Evropi a MC u Americi. Centrala Visa-e je u Singapuru (dugo vremena je bila u Londonu) a centrala MC je Vaterlo-u.
	* u zemljama istocne Evrope, Bliskog Istoka i drugih zemlja gde valuta nije bas nesto vazeca napolju uglavnom se Clearing i Settlement (u daljem tekstu C&S) rade u samoj zemlji (u nacionalnoj banci napr). Inace kada god se postane clan VMC u zavisnosti koji profil se otvara Issuer ili Acquiring se dobija settlement racun u odgovarajucoj banci - napr Intesa verovatno ima jedan u Narodnoj banci a drugi u Americi (za settlement sa karticama banaka koje nizu sa teritorije Srbije). VMC na osnovu BIN-ova (kartica banaka) od outgoing file-ova kreira incoming file-ove.
	* tok same transakcije:
		> osnovna napomena: tokom same transakcije VMC ne uzima nista - VMC naplacuje po odredjenoj transakciji odredjene kartice. Cifre su fiksne (flet tj nizu procenti), reda velicine na trecu, cetvrtu decimalu
		> e sada posmatracemo sistem gde je procesor izostavljen - on se posmatra samo kao ruter koji radi u ime banke
		> ako se provuce kartica i 'naplati' se 1000din
		> acquirer salje autorizacioni zahtev banci issuer-u preko VMC mreze
		> e sada kada kazem da ide preko mreze znaci da ide preko onoh glavnih centara. Podaci koji se dalju:
			< amaunt
			< PIN blok (postoji standard)
			< expaire date
			< BIN
			< CVV, CVC
		> kada se obavi autorizacija slede clearing i settlement - settlment je sam prenos sredstava tj racunanje net stanja
		> acquer banke kreiraju outgoing file-ove i salju ih VMC centrima
		> VMC na osnovu BIN-ova (kartica banaka) od outgoing file-ova kreira incoming file-ove.
		> VMC na osnovu incoming file-ova (koje pored toga salje i bankama issuer-ima) vrsi settlement
		> jos jedna napomena: VMC obardjuju cele iznose, bez obzira da li se radi o kreditnoj ili debitnoj kartici i druga stvar, u okviru outgoing file-a mogu postoji i druge traksakcije napr chargeback
	* e sada brojke ko kome sta naplacuje:
		> VMC (u zavisnosti da li zele da forsiraju issuing ili acquiering) menjaju IRF (interchange fee) i njega placa banka acquier banci issuer-u. Ta brojka (je u procentima) trenutno iznosi otprilike 1,1%. Inace sam IRF se formira i od konkretinih parametara: tipa kartice, tipa terminala, regiona gde se obradjuje transakcija...
		> e sada, banka acquer naplacuje svom trgovcu odredjeni procenat (koji je veci ili jednak IRF) sve preko IRF banka (od onih 1000 din koje su skinute sa racuna trgovca) uzima kao zaradu
		> treba napomenuti da acquier banka nema nikakav trosak ako je transakcija ON_US
	* i na kraju sam proces chargeback-a ili dispute-a:
		> kada vlasnik kartice dodje da se zali svom issuer-u kada issuer kovertuje zahtevu outgoing file VMC ga automatski obradjuje
		> banka acquier automatski isplacuje bankci issuer-u iznos dispute-a
		> e sada kada ce novac da dobije sam korisnik kartice zavisi od filozofije same banke issuer-a
		< naravno bitan je i rok i slovi koje je potrebno da zadovolji sama zalba tj da li ce trgovac banke acquer-a moci da opovrge zalbu i do kada ce to uraditi
	* bitna je napomena da za svaku transakciju u VMC postoje jasno definisani rokovi do kada moraju da se zavrase napr ako acquiering baka ne posalje u roku od tri dana u okviru outgoing file-a zahtev za naplatu odredjene transakcije issuer banka nije u obavezi da plati - ali su generalno preporuke da se sve ispalte ispostuju
